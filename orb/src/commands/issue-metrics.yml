description: >
  This command will run the issue-metrics tool to generate a markdown file with the metrics of the issues in the repository.
parameters:
  GH_TOKEN:
    type: string
  SEARCH_QUERY:
    type: string
  file-path:
    type: string
steps:
  - run:
      name: Run Issue-Metrics Tool
      command: |
        docker run --name issue-metrics-run -e SEARCH_QUERY="<< parameters.SEARCH_QUERY >>" -e GH_TOKEN="<< parameters.GH_TOKEN >>" us-docker.pkg.dev/oplabs-tools-artifacts/images/issue-metrics@sha256:e2528e480083fab6bb81f3a926598e25e0ae44ef3cc94a1d5d9d270978189ffe
        docker cp issue-metrics-run:/action/workspace/issue_metrics.md << parameters.file-path >>
